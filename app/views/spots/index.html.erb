<h1 class='fw-bold mb-4'>検索する</h1>
<div class='form'>
  <%= search_form_for @q do |f| %>
    <div class='row gx-2 mb-4'>
      <label class='col-md-1 col-form-label text-md-end'><%= f.label :'スポット名' %></label>
      <%= f.search_field :name_cont, placeholder: 'スポット名を入力してください', class:'form-control- col-md-6 shadow' %>
      <input type="submit" value="&#xf002; 検索" class="fa form-control- col-md-1 btn btn-primary shadow"><br>
    </div>

    <div class='row gx-2 mb-4'>
      <label class='col-md-1 col-form-label text-md-end'><%= f.label :'スポット詳細' %></label>
      <%= f.search_field :content_cont, placeholder: 'キーワードを入力してください', class:'form-control- col-md-6 shadow' %>
      <input type="submit" value="&#xf002; 検索" class="fa form-control- col-md-1 btn btn-primary shadow"><br>
    </div>

    <div class='row gx-2 mb-4'>
      <label class='col-md-1 col-form-label text-md-end'><%= f.label :region_id, '都道府県' %></label>
      <%= f.collection_select :region_id_eq, Region.all, :id, :name, { prompt: '選択してください' }, 
      autocomplete: 'region_id', class:'form-select- col-md-3 btn btn-secondary shadow' %>
      <input type="submit" value="&#xf002; 検索" class="fa form-control- col-md-1 btn btn-primary shadow">
    </div>
  <% end %>
</div>
<div class='row mt-5 mb-4'>
  <% if @q.conditions.present? && @spots.present? %><br>
    <% @spots.each do |spot| %>
      <div class='col-md-8 bg-light border rounded shadow mb-4 ms-2 p-2'>
        <% if user_signed_in? %>
          <% if current_user.liked?(spot) %>
            <%= button_to spot_likes_path(spot), class:'like-btn bg-light border-0', method: :delete do %>
              <%= link_to spot.name + '（' + spot.region.name + '）', "/spots/#{spot.id}", class: 'btn btn-secondary shadow ps-3' %>
              <div class='btn btn-light btn-lg text-danger ms-2'>
                <span class='fa fa-heart'></span>
                <span class='like__count'><%= spot.likes.count %></span>
              </div>
            <% end %>
          <% else %>
            <%= button_to spot_likes_path(spot), class:'like-btn bg-light border-0', method: :post do %>
              <%= link_to spot.name + '（' + spot.region.name + '）', "/spots/#{spot.id}", class: 'btn btn-secondary shadow ps-3' %>
              <div class='btn btn-light btn-lg text-danger ms-2'>
                <span class='fa fa-heart-o'></span>
                <span class='like__count'><%= spot.likes.count %></span>
              </div>
            <% end %>
          <% end %>
        <% else %>
          <%= link_to spot.name + '（' + spot.region.name + '）', "/spots/#{spot.id}", class: 'btn btn-secondary shadow ps-3' %>
          <div class='btn btn-light btn-lg text-danger ms-2'>
            <span class='fa fa-heart-o'></span>
            <span class='like__count'><%= spot.likes.count %></span>
          </div>
        <% end %>
        <div class='mt-2 mx-2'>
          <%= spot.content %>
        </div>
      </div>
    <% end %>
  <%else %>
    <h4 class='fw-bold'>検索結果はありません</h4>
  <% end %>
</div>
